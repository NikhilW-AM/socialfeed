<app-header></app-header>
<div class="container mt-5">
  <div class="row justify-content-center">

    <div class="row justify-content-center mb-2">
      <div class="col-md-6 text-right">
        <button class="btn btn-primary" routerLink="/addpost">add post</button>
      </div>
    </div>
    <div class="col-md-6">

      <div class="card" *ngFor="let post of posts;let i=index">
        <div class="card-header d-flex">
          <ngx-avatar class="dropdown" size="40" data-bs-toggle="dropdown" [name]="post.userName" aria-expanded="false">
          </ngx-avatar>
          &nbsp;&nbsp;
          <div class="mt-2">{{post.userName}}</div>
        </div>
        <div>
          <img class="card-img-top" src="http://localhost:3000/{{post.img}}" alt="img" />
        </div>
        <div class="card-footer text-muted">
          <div class="d-flex">
            <i (click)="onLikes(post._id)" [style.color]="post.likes.length ? 'red' : ''"
              [ngClass]="toggleColor ? 'bi bi-heart' : 'bi bi-heart'">
              {{post.likes.length}}</i>
            <i class="bi bi-chat"></i>
          </div>
          <!-- <div *ngIf="post.likes.length > 0">
            <small>like {{ post.likes.length }}</small>
          </div> -->

          <div>
            <small class="d-flex">
              <input class="comment input-sm" type="text" class="form-control" placeholder="comment..." #comm />
              <span class="bg-secondary text-white" (click)="postComment(post,comm.value)">post</span>
            </small>
          </div>

          <div class="row">
            <div class="col " style="margin-left: 20px;">
              <small class="row" *ngFor="let com of post.comments">{{com.comment}}</small>

            </div>
            <!-- <div class="col">
              <button class="btn btn-secondary btn-sm">post comment</button>
            </div> -->
          </div>

        </div>
      </div>
    </div>
  </div>
</div>
